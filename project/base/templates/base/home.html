{% extends 'main.html' %} {% block content %}

<script>
  const intervals = {};
  const finishTimes = {};
</script>

<div class="container">
  <br />
  <div class="row justify-content-center">
    <div class="col-12 col-lg-8 auctions-container">
      <h2>There are {{ auction_count }} auctions available:</h2>
      <div class="row">
        {% for auction in auctions %}
          {% include 'auction-card.html' with auction=auction %}
        {% endfor %}
      </div>
    </div>

    <div class="col-12 col-lg-4 text-center">
      <h2>Winners</h2>
    </div>
  </div>
</div>

{% comment %}
<style>
  .home-container {
    display: grid;
    grid-template-columns: 4fr 1fr;
  }
</style>
<div class="home-container">
  <div>
    <div>
      <h3>Browse Items</h3>
      <form method="GET" action="{% url 'home' %}">
        <input type="text" name="q" placeholder="Search Auctions..." />
      </form>
      <hr />
    </div>
    <h2>There are {{auction_count}} auctions available</h2>
    <hr />
    <div class="container">
      <div class="auction-grid">
        {% for auction in auctions %} {% if forloop.counter0|divisibleby:4 %}
        <div class="auction-column">
          {% endif %}
          <div class="auction-card">
            <a href="{% url 'auction' auction.id %}"
              ><h2>{{ auction.product.name }}</h2>
            </a>
            <p>
              Buying Price:
              <span class="price">{{ auction.current_price }}</span>
            </p>
            <p>Bid Duration: {{ auction.bid_duration }} Seconds</p>
            <p>
              Last Bidder: {% if auction.last_bid %} {{
              auction.last_bid.user.username }} {% else %}None{% endif %}
            </p>
            <form method="POST" action="{% url 'create-bid' auction.id %}">
              {% csrf_token %}
              <button type="submit">Bid Now!</button>
            </form>
            <!-- Add more details or customizations here -->
          </div>
          {% if forloop.counter|divisibleby:4 or forloop.last %}
        </div>
        {% endif %}
        <hr />

        {% endfor %} {% if not auctions %}
        <p>No auctions available.</p>
        {% endif %}
      </div>
    </div>
  </div>
  <div>
    <h2>Recent Wins</h2>
    {% for deal in won_deals%}
    <div>
      <small
        ><a href="{% url 'user-profile' deal.user.id %}">@{{deal.user}} </a
        >{{deal.date_modified|timesince}}</small
      >
      <p>has won: {{deal.product.name}}</p>
      <p>at price: {{deal.transaction.price}}</p>
      <hr />
    </div>

    {% endfor%}
  </div>
</div>
{% endcomment %} {% endblock content %}
